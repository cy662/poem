// n8né›†æˆæœåŠ¡
// ç”¨äºå¤„ç†è¯—è¯AIåŠ©æ‰‹çš„APIè¯·æ±‚

interface AIAssistantRequest {
  question: string;
  context?: string;
  userId?: string;
}

interface AIAssistantResponse {
  answer: string;
  sources?: string[];
  confidence: number;
  timestamp: string;
}

// æ¨¡æ‹Ÿn8n APIç«¯ç‚¹é…ç½®
const N8N_CONFIG = {
  baseUrl: import.meta.env.VITE_N8N_BASE_URL || 'http://localhost:5678',
  webhookPath: import.meta.env.VITE_N8N_WEBHOOK_PATH || '/webhook/poem-ai-assistant',
  apiKey: import.meta.env.VITE_N8N_API_KEY || 'demo-key'
};

// æ‰©å±•è¯—è¯çŸ¥è¯†åº“
const POEM_KNOWLEDGE_BASE: Record<string, string> = {
  // å¿«é€Ÿé—®é¢˜æ¨¡æ¿
  'æ¨èä¸€é¦–ç»å…¸å”è¯—': 'æˆ‘æ¨èæç™½çš„ã€Šé™å¤œæ€ã€‹ï¼šåºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚è¿™é¦–è¯—è¯­è¨€ç®€ç»ƒï¼Œæ„å¢ƒæ·±è¿œï¼Œè¡¨è¾¾äº†æ¸¸å­æ€ä¹¡ä¹‹æƒ…ã€‚',
  'è§£é‡Š"åºŠå‰æ˜æœˆå…‰"çš„å«ä¹‰': '"åºŠå‰æ˜æœˆå…‰"å‡ºè‡ªæç™½çš„ã€Šé™å¤œæ€ã€‹ã€‚è¿™é‡Œçš„"åºŠ"å¯èƒ½æŒ‡äº•æ æˆ–åå…·ï¼Œæœˆå…‰æ´’åœ¨åºŠå‰ï¼Œè¥é€ å‡ºå®é™çš„å¤œæ™šæ°›å›´ï¼Œä¸ºåé¢çš„æ€ä¹¡ä¹‹æƒ…åšé“ºå«ã€‚',
  'ä»‹ç»æç™½çš„ä¸»è¦ä½œå“': 'æç™½æ˜¯å”ä»£ä¼Ÿå¤§çš„æµªæ¼«ä¸»ä¹‰è¯—äººï¼Œä¸»è¦ä½œå“åŒ…æ‹¬ï¼šã€Šé™å¤œæ€ã€‹ã€ã€Šå°†è¿›é…’ã€‹ã€ã€Šèœ€é“éš¾ã€‹ã€ã€Šæœ›åºå±±ç€‘å¸ƒã€‹ã€ã€Šæ—©å‘ç™½å¸åŸã€‹ç­‰ï¼Œä»–çš„è¯—é£è±ªæ”¾é£˜é€¸ï¼Œæƒ³è±¡ä¸°å¯Œã€‚',
  'ä»€ä¹ˆæ˜¯ä¸ƒè¨€ç»å¥ï¼Ÿ': 'ä¸ƒè¨€ç»å¥æ˜¯ä¸­å›½ä¼ ç»Ÿè¯—æ­Œçš„ä¸€ç§å½¢å¼ï¼Œæ¯é¦–è¯—å››å¥ï¼Œæ¯å¥ä¸ƒä¸ªå­—ã€‚è¦æ±‚æŠ¼éŸµä¸¥æ ¼ï¼Œé€šå¸¸ç¬¬ä¸€ã€äºŒã€å››å¥æŠ¼éŸµã€‚ä»£è¡¨ä½œå“æœ‰ç‹ä¹‹æ¶£çš„ã€Šç™»é¹³é›€æ¥¼ã€‹ç­‰ã€‚',
  'å”è¯—å’Œå®‹è¯çš„åŒºåˆ«': 'å”è¯—å’Œå®‹è¯æ˜¯ä¸­å›½å¤å…¸è¯—æ­Œçš„ä¸¤å¤§é«˜å³°ã€‚å”è¯—æ³¨é‡æ ¼å¾‹å’Œæ„å¢ƒï¼Œå½¢å¼ä¸¥è°¨ï¼›å®‹è¯æ›´æ³¨é‡éŸ³ä¹æ€§å’ŒæŠ’æƒ…æ€§ï¼Œå¥å¼çµæ´»å¤šå˜ã€‚',
  'æ¨èå®‹ä»£è¯äºº': 'æˆ‘æ¨èè‹è½¼ã€ææ¸…ç…§ã€è¾›å¼ƒç–¾ã€‚è‹è½¼è±ªæ”¾æ´’è„±ï¼Œææ¸…ç…§å©‰çº¦ç»†è…»ï¼Œè¾›å¼ƒç–¾æ°”åŠ¿ç£…ç¤´ï¼Œå„æœ‰ç‰¹è‰²ã€‚',
  'è§£é‡Š"å¤§æ±Ÿä¸œå»"': '"å¤§æ±Ÿä¸œå»"å‡ºè‡ªè‹è½¼çš„ã€Šå¿µå¥´å¨‡Â·èµ¤å£æ€€å¤ã€‹ï¼Œå¼€ç¯‡æ°”åŠ¿æ¢å®ï¼Œå€Ÿé•¿æ±Ÿä¸œæµæŠ’å‘å¯¹å†å²å˜è¿çš„æ„Ÿæ…¨ï¼Œå±•ç°è±ªæ”¾è¯é£ã€‚',
  'ä»€ä¹ˆæ˜¯è¯ç‰Œå': 'è¯ç‰Œåæ˜¯è¯çš„æ ¼å¼åç§°ï¼Œè§„å®šè¯çš„å¥å¼ã€å¹³ä»„å’ŒéŸµå¾‹ã€‚å¸¸è§è¯ç‰Œæœ‰ã€Šæ°´è°ƒæ­Œå¤´ã€‹ã€ã€Šæ»¡æ±Ÿçº¢ã€‹ã€ã€Šè¶æ‹èŠ±ã€‹ç­‰ã€‚',
  'æ¨èå©‰çº¦æ´¾è¯—è¯': 'å©‰çº¦æ´¾ä»¥ææ¸…ç…§ä¸ºä»£è¡¨ï¼Œæ¨èã€Šå£°å£°æ…¢Â·å¯»å¯»è§…è§…ã€‹ï¼Œæƒ…æ„Ÿç»†è…»ï¼Œè¯­è¨€ä¼˜ç¾ï¼Œå……åˆ†å±•ç°å©‰çº¦é£æ ¼ã€‚',
  'è§£é‡Š"äººç”Ÿè‹¥åªå¦‚åˆè§"': 'å‡ºè‡ªçº³å…°æ€§å¾·çš„ã€Šæœ¨å…°èŠ±Â·æ‹Ÿå¤å†³ç»è¯æŸ¬å‹ã€‹ï¼Œè¡¨è¾¾å¯¹ç¾å¥½åˆè§çš„æ€€å¿µå’Œå¯¹ç°å®å˜è¿çš„æ„Ÿæ…¨ï¼Œæƒ…æ„ŸçœŸæŒšåŠ¨äººã€‚',

  // è¯—äººä»‹ç»
  'æç™½': 'æç™½ï¼ˆ701å¹´ï¼762å¹´ï¼‰ï¼Œå­—å¤ªç™½ï¼Œå·é’è²å±…å£«ï¼Œå”ä»£ä¼Ÿå¤§çš„æµªæ¼«ä¸»ä¹‰è¯—äººï¼Œè¢«åäººèª‰ä¸º"è¯—ä»™"ã€‚å…¶è¯—è±ªæ”¾é£˜é€¸ï¼Œæƒ³è±¡ä¸°å¯Œï¼Œè¯­è¨€æµè½¬è‡ªç„¶ï¼ŒéŸ³å¾‹å’Œè°å¤šå˜ã€‚',
  'æœç”«': 'æœç”«ï¼ˆ712å¹´ï¼770å¹´ï¼‰ï¼Œå­—å­ç¾ï¼Œè‡ªå·å°‘é™µé‡è€ï¼Œå”ä»£ä¼Ÿå¤§çš„ç°å®ä¸»ä¹‰è¯—äººï¼Œè¢«å°Šä¸º"è¯—åœ£"ã€‚å…¶è¯—æ²‰éƒé¡¿æŒ«ï¼Œåæ˜ ç¤¾ä¼šç°å®ï¼Œå…·æœ‰æ·±åˆ»çš„å†å²æ„ä¹‰ã€‚',
  'è‹è½¼': 'è‹è½¼ï¼ˆ1037å¹´ï¼1101å¹´ï¼‰ï¼Œå­—å­ç»ï¼Œå·ä¸œå¡å±…å£«ï¼ŒåŒ—å®‹æ–‡å­¦å®¶ã€ä¹¦ç”»å®¶ï¼Œè±ªæ”¾æ´¾è¯äººä»£è¡¨ã€‚è¯—è¯æ–‡èµ‹çš†ç²¾ï¼Œé£æ ¼è±ªæ”¾æ´’è„±ã€‚',
  'ææ¸…ç…§': 'ææ¸…ç…§ï¼ˆ1084å¹´ï¼1155å¹´ï¼‰ï¼Œå·æ˜“å®‰å±…å£«ï¼Œå®‹ä»£å¥³è¯äººï¼Œå©‰çº¦æ´¾ä»£è¡¨ã€‚å…¶è¯è¯­è¨€æ¸…ä¸½ï¼Œæ„Ÿæƒ…çœŸæŒšï¼Œå‰æœŸå¤šå†™æ‚ é—²ç”Ÿæ´»ï¼ŒåæœŸå¤šæ‚²å¹èº«ä¸–ã€‚',
  'ç™½å±…æ˜“': 'ç™½å±…æ˜“ï¼ˆ772å¹´ï¼846å¹´ï¼‰ï¼Œå­—ä¹å¤©ï¼Œå·é¦™å±±å±…å£«ï¼Œå”ä»£ç°å®ä¸»ä¹‰è¯—äººã€‚å…¶è¯—è¯­è¨€é€šä¿—ï¼Œåæ˜ æ°‘ç”Ÿç–¾è‹¦ï¼Œä»£è¡¨ä½œã€Šçµç¶è¡Œã€‹ã€ã€Šé•¿æ¨æ­Œã€‹ã€‚',
  'ç‹ç»´': 'ç‹ç»´ï¼ˆ701å¹´ï¼761å¹´ï¼‰ï¼Œå­—æ‘©è¯˜ï¼Œå·æ‘©è¯˜å±…å£«ï¼Œå”ä»£è¯—äººã€ç”»å®¶ã€‚å…¶è¯—æ¸…æ–°æ·¡è¿œï¼Œè‡ªç„¶è„±ä¿—ï¼Œå…·æœ‰æµ“åšçš„ç¦…æ„ï¼Œè¢«èª‰ä¸º"è¯—ä½›"ã€‚',
  'è¾›å¼ƒç–¾': 'è¾›å¼ƒç–¾ï¼ˆ1140å¹´ï¼1207å¹´ï¼‰ï¼Œå­—å¹¼å®‰ï¼Œå·ç¨¼è½©ï¼Œå—å®‹è±ªæ”¾æ´¾è¯äººã€‚å…¶è¯æ°”åŠ¿é›„æµ‘ï¼Œæ…·æ…¨æ‚²å£®ï¼Œå……æ»¡çˆ±å›½çƒ­æƒ…ã€‚',
  'é™†æ¸¸': 'é™†æ¸¸ï¼ˆ1125å¹´ï¼1210å¹´ï¼‰ï¼Œå­—åŠ¡è§‚ï¼Œå·æ”¾ç¿ï¼Œå—å®‹çˆ±å›½è¯—äººã€‚å…¶è¯—é£æ ¼é›„æµ‘è±ªæ”¾ï¼Œå……æ»¡çˆ±å›½æƒ…æ€€ï¼Œä»£è¡¨ä½œã€Šç¤ºå„¿ã€‹ã€ã€Šé’—å¤´å‡¤ã€‹ã€‚',

  // è¯—è¯ä½“è£
  'å¤è¯—': 'å¤è¯—æŒ‡å”ä»£ä»¥å‰çš„è¯—æ­Œå½¢å¼ï¼ŒåŒ…æ‹¬å¤ä½“è¯—å’Œä¹åºœè¯—ã€‚å½¢å¼ç›¸å¯¹è‡ªç”±ï¼Œä¸ä¸¥æ ¼è®²ç©¶æ ¼å¾‹ï¼Œæ³¨é‡æ„å¢ƒå’Œæƒ…æ„Ÿè¡¨è¾¾ã€‚',
  'è¿‘ä½“è¯—': 'è¿‘ä½“è¯—æŒ‡å”ä»£å½¢æˆçš„æ ¼å¾‹è¯—ï¼ŒåŒ…æ‹¬ç»å¥å’Œå¾‹è¯—ã€‚è®²ç©¶å¹³ä»„ã€å¯¹ä»—ã€æŠ¼éŸµï¼Œå½¢å¼ä¸¥è°¨ï¼Œæ ¼å¾‹è§„èŒƒã€‚',
  'è¯': 'è¯æ˜¯å®‹ä»£ç››è¡Œçš„è¯—æ­Œå½¢å¼ï¼Œåˆç§°é•¿çŸ­å¥ã€‚æœ‰å›ºå®šçš„è¯ç‰Œåï¼Œè®²ç©¶å¹³ä»„å’ŒéŸµå¾‹ï¼Œå¥å¼çµæ´»ï¼Œé€‚åˆé…ä¹æ­Œå”±ã€‚',
  'æ›²': 'æ›²æ˜¯å…ƒä»£å…´èµ·çš„è¯—æ­Œå½¢å¼ï¼ŒåŒ…æ‹¬æ•£æ›²å’Œå‰§æ›²ã€‚è¯­è¨€æ›´åŠ é€šä¿—ï¼Œå¯ä»¥åŠ å…¥è¡¬å­—ï¼Œè¡¨ç°åŠ›ä¸°å¯Œã€‚',
  'èµ‹': 'èµ‹æ˜¯æ±‰ä»£ç››è¡Œçš„ä¸€ç§æ–‡ä½“ï¼Œä»‹äºè¯—æ­Œå’Œæ•£æ–‡ä¹‹é—´ã€‚è®²ç©¶é“ºé™ˆæ’æ¯”ï¼Œè¾è—»åä¸½ï¼Œæå†™ç»†è‡´ã€‚',

  // è¯—è¯åå¥è§£é‡Š
  'ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡': 'å‡ºè‡ªæç™½ã€Šé™å¤œæ€ã€‹ã€‚æŠ¬å¤´ä»°æœ›æ˜æœˆï¼Œä½å¤´æ€å¿µæ•…ä¹¡ã€‚é€šè¿‡ç®€å•çš„åŠ¨ä½œæå†™ï¼Œæ·±åˆ»è¡¨è¾¾äº†æ¸¸å­æ€ä¹¡ä¹‹æƒ…ã€‚',
  'æ˜¥é£åˆç»¿æ±Ÿå—å²¸': 'å‡ºè‡ªç‹å®‰çŸ³ã€Šæ³Šèˆ¹ç“œæ´²ã€‹ã€‚æ˜¥é£å†æ¬¡å¹ç»¿äº†æ±Ÿå—å²¸ï¼Œæ—¢å†™æ™¯åˆæŠ’æƒ…ï¼Œè¡¨è¾¾äº†å¯¹å®¶ä¹¡çš„æ€å¿µå’Œå¯¹æ—¶å…‰æµé€çš„æ„Ÿæ…¨ã€‚',
  'é—®å›èƒ½æœ‰å‡ å¤šæ„ï¼Œæ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘ä¸œæµ': 'å‡ºè‡ªæç…œã€Šè™ç¾äººã€‹ã€‚ç”¨æ˜¥æ°´ä¸œæµæ¯”å–»æ„ç»ªçš„ç»µé•¿æ— å°½ï¼Œå½¢è±¡ç”ŸåŠ¨åœ°è¡¨è¾¾äº†äº¡å›½ä¹‹ç—›ã€‚',
  'æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»': 'å‡ºè‡ªç‹å‹ƒã€Šé€æœå°‘åºœä¹‹ä»»èœ€å·ã€‹ã€‚åªè¦å››æµ·ä¹‹å†…æœ‰çŸ¥å¿ƒæœ‹å‹ï¼Œå³ä½¿è¿œåœ¨å¤©æ¶¯ä¹Ÿå¦‚è¿‘é‚»ä¸€èˆ¬ã€‚è¡¨è¾¾äº†å¯¹å‹è°Šçš„çè§†å’Œä¹è§‚è±è¾¾çš„äººç”Ÿæ€åº¦ã€‚',
  'äººç”Ÿè‡ªå¤è°æ— æ­»ï¼Œç•™å–ä¸¹å¿ƒç…§æ±—é’': 'å‡ºè‡ªæ–‡å¤©ç¥¥ã€Šè¿‡é›¶ä¸æ´‹ã€‹ã€‚è‡ªå¤ä»¥æ¥äººç»ˆæœ‰ä¸€æ­»ï¼Œä½†è¦ç•™ä¸‹ä¸€ç‰‡èµ¤è¯šä¹‹å¿ƒç…§è€€å²å†Œã€‚è¡¨è¾¾äº†å´‡é«˜çš„æ°‘æ—æ°”èŠ‚å’Œçˆ±å›½ç²¾ç¥ã€‚',
  'é‡‡èŠä¸œç¯±ä¸‹ï¼Œæ‚ ç„¶è§å—å±±': 'å‡ºè‡ªé™¶æ¸Šæ˜ã€Šé¥®é…’ã€‹ã€‚åœ¨ä¸œç¯±ä¸‹é‡‡æ‘˜èŠèŠ±ï¼Œæ‚ é—²åœ°æŠ¬å¤´çœ‹è§å—å±±ã€‚æç»˜äº†éšé€¸ç”Ÿæ´»çš„é—²é€‚æ¬æ·¡ï¼Œä½“ç°äº†é“å®¶è‡ªç„¶æ— ä¸ºçš„æ€æƒ³ã€‚',
  'å¤§æ¼ å­¤çƒŸç›´ï¼Œé•¿æ²³è½æ—¥åœ†': 'å‡ºè‡ªç‹ç»´ã€Šä½¿è‡³å¡ä¸Šã€‹ã€‚å¤§æ¼ ä¸­ä¸€ç¼•å­¤çƒŸç¬”ç›´ä¸Šå‡ï¼Œé•¿æ²³ä¸Šä¸€è½®è½æ—¥æµ‘åœ†ã€‚é€šè¿‡ç®€ç»ƒçš„ç¬”è§¦å‹¾å‹’å‡ºè¾¹å¡å£®é˜”è‹å‡‰çš„æ™¯è‰²ã€‚',
  'æœ±é—¨é…’è‚‰è‡­ï¼Œè·¯æœ‰å†»æ­»éª¨': 'å‡ºè‡ªæœç”«ã€Šè‡ªäº¬èµ´å¥‰å…ˆå¿å’æ€€äº”ç™¾å­—ã€‹ã€‚å¯Œè´µäººå®¶é…’è‚‰å¤šå¾—å‘è‡­ï¼Œè·¯è¾¹å´æœ‰å†»é¥¿è€Œæ­»çš„å°¸éª¨ã€‚æ·±åˆ»æ­éœ²äº†ç¤¾ä¼šçš„ä¸å¹³ç­‰å’Œè´«å¯Œå·®è·ã€‚',

  // è¯—è¯åˆ›ä½œæŠ€å·§
  'æ¯”å…´': 'æ¯”å…´æ˜¯è¯—è¯åˆ›ä½œçš„é‡è¦æ‰‹æ³•ã€‚"æ¯”"å³æ¯”å–»ï¼Œ"å…´"å³èµ·å…´ã€‚é€šè¿‡æ¯”å–»å’Œè”æƒ³ï¼Œä½¿æŠ½è±¡çš„æƒ…æ„Ÿå…·ä½“åŒ–ï¼Œå¢å¼ºä½œå“çš„è‰ºæœ¯æ„ŸæŸ“åŠ›ã€‚',
  'å¯¹ä»—': 'å¯¹ä»—æ˜¯è¿‘ä½“è¯—çš„é‡è¦ç‰¹å¾ï¼Œè¦æ±‚ä¸Šä¸‹å¥åœ¨è¯æ€§ã€ç»“æ„ã€æ„ä¹‰ä¸Šç›¸äº’å¯¹åº”ã€‚å¥½çš„å¯¹ä»—èƒ½ä½¿è¯—æ­Œæ›´åŠ å·¥æ•´ä¼˜ç¾ã€‚',
  'æŠ¼éŸµ': 'æŠ¼éŸµæŒ‡è¯—è¯ä¸­ç›¸åº”ä½ç½®çš„éŸ³èŠ‚éŸµæ¯ç›¸åŒæˆ–ç›¸è¿‘ã€‚åˆç†çš„æŠ¼éŸµèƒ½å¢å¼ºè¯—æ­Œçš„éŸ³ä¹ç¾æ„Ÿå’ŒèŠ‚å¥æ„Ÿã€‚',
  'æ„å¢ƒ': 'æ„å¢ƒæ˜¯è¯—è¯è¿½æ±‚çš„è‰ºæœ¯å¢ƒç•Œï¼Œé€šè¿‡æ„è±¡çš„ç»„åˆè¥é€ å‡ºæ·±è¿œæ‚ é•¿çš„è‰ºæœ¯ç©ºé—´ï¼Œä½¿è¯»è€…äº§ç”Ÿä¸°å¯Œçš„è”æƒ³å’Œå…±é¸£ã€‚',
  'æ„è±¡': 'æ„è±¡æ˜¯è¯—è¯ä¸­å…·ä½“çš„ç‰©è±¡æå†™ï¼Œé€šè¿‡è¿™äº›å…·ä½“çš„å½¢è±¡æ¥è¡¨è¾¾æŠ½è±¡çš„æƒ…æ„Ÿå’Œæ€æƒ³ã€‚å¦‚"æœˆäº®"å¸¸è±¡å¾æ€ä¹¡ï¼Œ"æ¨æŸ³"å¸¸è±¡å¾ç¦»åˆ«ã€‚',

  // è¯—è¯æµæ´¾
  'å±±æ°´ç”°å›­è¯—æ´¾': 'ä»¥ç‹ç»´ã€å­Ÿæµ©ç„¶ä¸ºä»£è¡¨ï¼Œä¸»è¦æå†™è‡ªç„¶å±±æ°´å’Œç”°å›­ç”Ÿæ´»ï¼Œé£æ ¼æ¸…æ–°æ·¡é›…ï¼Œæ„å¢ƒå¹½è¿œï¼Œä½“ç°é“å®¶è‡ªç„¶æ— ä¸ºçš„æ€æƒ³ã€‚',
  'è¾¹å¡è¯—æ´¾': 'ä»¥é«˜é€‚ã€å²‘å‚ä¸ºä»£è¡¨ï¼Œä¸»è¦æå†™è¾¹å¡é£å…‰å’Œå†›æ—…ç”Ÿæ´»ï¼Œé£æ ¼é›„æµ‘è±ªæ”¾ï¼Œå……æ»¡çˆ±å›½çƒ­æƒ…å’Œè‹±é›„æ°”æ¦‚ã€‚',
  'å©‰çº¦æ´¾': 'ä»¥ææ¸…ç…§ã€æŸ³æ°¸ä¸ºä»£è¡¨ï¼Œè¯é£å©‰çº¦ç»†è…»ï¼Œå¤šå†™ä¸ªäººæƒ…æ„Ÿå’Œç¦»æ„åˆ«ç»ªï¼Œè¯­è¨€ä¼˜ç¾ï¼Œæƒ…æ„ŸçœŸæŒšã€‚',
  'è±ªæ”¾æ´¾': 'ä»¥è‹è½¼ã€è¾›å¼ƒç–¾ä¸ºä»£è¡¨ï¼Œè¯é£è±ªæ”¾æ´’è„±ï¼Œé¢˜æå¹¿æ³›ï¼Œæ°”åŠ¿ç£…ç¤´ï¼Œå……æ»¡æµªæ¼«ä¸»ä¹‰è‰²å½©å’Œçˆ±å›½æƒ…æ€€ã€‚',
  'ç°å®ä¸»ä¹‰': 'ä»¥æœç”«ã€ç™½å±…æ˜“ä¸ºä»£è¡¨ï¼Œå…³æ³¨ç¤¾ä¼šç°å®ï¼Œåæ˜ æ°‘ç”Ÿç–¾è‹¦ï¼Œå…·æœ‰æ·±åˆ»çš„ç¤¾ä¼šæ„ä¹‰å’Œå†å²ä»·å€¼ã€‚',

  // è¯—è¯é‰´èµ
  'å¦‚ä½•æ¬£èµè¯—è¯': 'æ¬£èµè¯—è¯å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼š1.ç†è§£å­—é¢æ„æ€ 2.åˆ†æè‰ºæœ¯æ‰‹æ³• 3.ä½“ä¼šæƒ…æ„Ÿæ„å¢ƒ 4.äº†è§£åˆ›ä½œèƒŒæ™¯ 5.æ„Ÿå—è¯­è¨€ç¾æ„Ÿã€‚',
  'è¯—è¯çš„éŸµå¾‹ç¾': 'è¯—è¯çš„éŸµå¾‹ç¾ä½“ç°åœ¨å¹³ä»„äº¤æ›¿ã€æŠ¼éŸµå’Œè°ã€èŠ‚å¥åˆ†æ˜ç­‰æ–¹é¢ã€‚å¥½çš„è¯—è¯è¯»èµ·æ¥æœ—æœ—ä¸Šå£ï¼Œå¯Œæœ‰éŸ³ä¹ç¾æ„Ÿã€‚',
  'è¯—è¯çš„æƒ…æ„Ÿè¡¨è¾¾': 'è¯—è¯æ˜¯æƒ…æ„Ÿçš„è½½ä½“ï¼Œé€šè¿‡å…·ä½“çš„æ„è±¡å’Œä¼˜ç¾çš„è¯­è¨€ï¼Œè¡¨è¾¾ä½œè€…ä¸°å¯Œå¤æ‚çš„å†…å¿ƒä¸–ç•Œå’Œäººç”Ÿæ„Ÿæ‚Ÿã€‚',
  'è¯—è¯çš„ç¤¾ä¼šä»·å€¼': 'è¯—è¯ä¸ä»…å…·æœ‰å®¡ç¾ä»·å€¼ï¼Œè¿˜åæ˜ äº†ç‰¹å®šå†å²æ—¶æœŸçš„ç¤¾ä¼šé£è²Œå’Œäººæ°‘çš„ç”Ÿæ´»çŠ¶å†µï¼Œå…·æœ‰é‡è¦çš„å†å²å’Œæ–‡åŒ–ä»·å€¼ã€‚',

  // è¯—è¯å†å²
  'è¯—ç»': 'ã€Šè¯—ç»ã€‹æ˜¯ä¸­å›½æœ€æ—©çš„è¯—æ­Œæ€»é›†ï¼Œæ”¶å½•äº†è¥¿å‘¨åˆå¹´è‡³æ˜¥ç§‹ä¸­å¶çš„è¯—æ­Œ305ç¯‡ï¼Œåˆ†ä¸ºé£ã€é›…ã€é¢‚ä¸‰éƒ¨åˆ†ã€‚',
  'æ¥šè¾': 'æ¥šè¾æ˜¯æˆ˜å›½æ—¶æœŸæ¥šå›½è¯—äººå±ˆåŸç­‰äººåˆ›ä½œçš„è¯—æ­Œï¼Œä»¥ã€Šç¦»éªšã€‹ä¸ºä»£è¡¨ï¼Œå…·æœ‰æµ“åšçš„åœ°æ–¹ç‰¹è‰²å’Œæµªæ¼«ä¸»ä¹‰è‰²å½©ã€‚',
  'æ±‰ä¹åºœ': 'æ±‰ä¹åºœæ˜¯æ±‰ä»£è®¾ç«‹çš„å®˜æ–¹éŸ³ä¹æœºæ„ï¼Œå…¶æ”¶é›†æ•´ç†çš„æ°‘æ­Œç§°ä¸ºä¹åºœè¯—ï¼ŒçœŸå®åæ˜ äº†å½“æ—¶çš„ç¤¾ä¼šç”Ÿæ´»å’Œäººæ°‘æƒ…æ„Ÿã€‚',
  'å»ºå®‰æ–‡å­¦': 'å»ºå®‰æ–‡å­¦æŒ‡æ±‰æœ«å»ºå®‰æ—¶æœŸçš„æ–‡å­¦åˆ›ä½œï¼Œä»¥æ›¹æ“ã€æ›¹ä¸•ã€æ›¹æ¤çˆ¶å­ä¸ºä»£è¡¨ï¼Œé£æ ¼æ…·æ…¨æ‚²å‡‰ï¼Œå²ç§°"å»ºå®‰é£éª¨"ã€‚',
  'å”è¯—': 'å”è¯—æ˜¯ä¸­å›½å¤å…¸è¯—æ­Œçš„é»„é‡‘æ—¶ä»£ï¼Œåˆ†ä¸ºåˆå”ã€ç››å”ã€ä¸­å”ã€æ™šå”å››ä¸ªæ—¶æœŸï¼Œäº§ç”Ÿäº†æç™½ã€æœç”«ã€ç‹ç»´ç­‰ä¼Ÿå¤§è¯—äººã€‚',
  'å®‹è¯': 'å®‹è¯æ˜¯å®‹ä»£æ–‡å­¦çš„ä»£è¡¨ï¼Œåˆ†ä¸ºå©‰çº¦æ´¾å’Œè±ªæ”¾æ´¾ï¼Œé¢˜æå¹¿æ³›ï¼Œå½¢å¼å¤šæ ·ï¼Œè¾¾åˆ°äº†è¯çš„è‰ºæœ¯é«˜å³°ã€‚',
  'å…ƒæ›²': 'å…ƒæ›²æ˜¯å…ƒä»£æ–‡å­¦çš„ä»£è¡¨ï¼ŒåŒ…æ‹¬æ•£æ›²å’Œæ‚å‰§ï¼Œè¯­è¨€é€šä¿—ç”ŸåŠ¨ï¼Œè´´è¿‘äººæ°‘ç”Ÿæ´»ï¼Œå…·æœ‰é²œæ˜çš„æ—¶ä»£ç‰¹è‰²ã€‚',

  // æ‰©å±•æ›´å¤šè¯—äºº
  'é™¶æ¸Šæ˜': 'é™¶æ¸Šæ˜ï¼ˆçº¦365-427ï¼‰ï¼Œå­—å…ƒäº®ï¼Œå·äº”æŸ³å…ˆç”Ÿï¼Œä¸œæ™‹è¯—äººã€‚å¼€åˆ›ç”°å›­è¯—æ´¾ï¼Œä»£è¡¨ä½œã€Šæ¡ƒèŠ±æºè®°ã€‹ã€ã€Šå½’å»æ¥å…®è¾ã€‹ã€‚',
  'å­Ÿæµ©ç„¶': 'å­Ÿæµ©ç„¶ï¼ˆ689-740ï¼‰ï¼Œå”ä»£å±±æ°´ç”°å›­è¯—äººï¼Œä¸ç‹ç»´å¹¶ç§°"ç‹å­Ÿ"ã€‚ä»£è¡¨ä½œã€Šæ˜¥æ™“ã€‹ã€ã€Šè¿‡æ•…äººåº„ã€‹ã€‚',
  'ç‹æ˜Œé¾„': 'ç‹æ˜Œé¾„ï¼ˆ698-757ï¼‰ï¼Œå”ä»£è¾¹å¡è¯—äººï¼Œè¢«èª‰ä¸º"ä¸ƒç»åœ£æ‰‹"ã€‚ä»£è¡¨ä½œã€Šå‡ºå¡ã€‹ã€ã€Šä»å†›è¡Œã€‹ã€‚',
  'å²‘å‚': 'å²‘å‚ï¼ˆçº¦715-770ï¼‰ï¼Œå”ä»£è¾¹å¡è¯—äººï¼Œä¸é«˜é€‚å¹¶ç§°"é«˜å²‘"ã€‚ä»£è¡¨ä½œã€Šç™½é›ªæ­Œé€æ­¦åˆ¤å®˜å½’äº¬ã€‹ã€‚',
  'é«˜é€‚': 'é«˜é€‚ï¼ˆçº¦704-765ï¼‰ï¼Œå”ä»£è¾¹å¡è¯—äººï¼Œè¯—é£é›„æµ‘è±ªæ”¾ã€‚ä»£è¡¨ä½œã€Šç‡•æ­Œè¡Œã€‹ã€ã€Šåˆ«è‘£å¤§ã€‹ã€‚',
  'æŸ³æ°¸': 'æŸ³æ°¸ï¼ˆçº¦984-1053ï¼‰ï¼ŒåŒ—å®‹è¯äººï¼Œå©‰çº¦æ´¾ä»£è¡¨ã€‚ç²¾é€šéŸ³å¾‹ï¼Œåˆ›ä½œå¤§é‡æ…¢è¯ã€‚ä»£è¡¨ä½œã€Šé›¨éœ–é“ƒã€‹ã€ã€Šæœ›æµ·æ½®ã€‹ã€‚',
  'æ™æ®Š': 'æ™æ®Šï¼ˆ991-1055ï¼‰ï¼ŒåŒ—å®‹è¯äººï¼Œå©‰çº¦æ´¾ä»£è¡¨ã€‚è¯é£å©‰çº¦å«è“„ï¼Œè¯­è¨€ç²¾ç‚¼ã€‚ä»£è¡¨ä½œã€Šæµ£æºªæ²™ã€‹ã€ã€Šè¶æ‹èŠ±ã€‹ã€‚',
  'æ¬§é˜³ä¿®': 'æ¬§é˜³ä¿®ï¼ˆ1007-1072ï¼‰ï¼ŒåŒ—å®‹æ–‡å­¦å®¶ï¼Œå”å®‹å…«å¤§å®¶ä¹‹ä¸€ã€‚è¯é£æ¸…æ–°è‡ªç„¶ã€‚ä»£è¡¨ä½œã€Šé†‰ç¿äº­è®°ã€‹ã€ã€Šç”ŸæŸ¥å­ã€‹ã€‚',
  'ç‹å®‰çŸ³': 'ç‹å®‰çŸ³ï¼ˆ1021-1086ï¼‰ï¼ŒåŒ—å®‹æ”¿æ²»å®¶ã€æ–‡å­¦å®¶ã€‚è¯—é£ç®€ç»ƒæ·±åˆ»ã€‚ä»£è¡¨ä½œã€Šæ³Šèˆ¹ç“œæ´²ã€‹ã€ã€Šå…ƒæ—¥ã€‹ã€‚',
  'ç§¦è§‚': 'ç§¦è§‚ï¼ˆ1049-1100ï¼‰ï¼ŒåŒ—å®‹è¯äººï¼Œå©‰çº¦æ´¾ä»£è¡¨ã€‚è¯é£å©‰çº¦ç»†è…»ã€‚ä»£è¡¨ä½œã€Šé¹Šæ¡¥ä»™ã€‹ã€ã€Šæ»¡åº­èŠ³ã€‹ã€‚',
  'å‘¨é‚¦å½¦': 'å‘¨é‚¦å½¦ï¼ˆ1056-1121ï¼‰ï¼ŒåŒ—å®‹è¯äººï¼Œç²¾é€šéŸ³å¾‹ï¼Œæ ¼å¾‹ä¸¥è°¨ã€‚ä»£è¡¨ä½œã€Šå…°é™µç‹ã€‹ã€ã€Šè‹å¹•é®ã€‹ã€‚',
  'å§œå¤”': 'å§œå¤”ï¼ˆ1154-1221ï¼‰ï¼Œå—å®‹è¯äººï¼Œç²¾é€šéŸ³ä¹ï¼Œè¯é£æ¸…ç©ºé›…è‡´ã€‚ä»£è¡¨ä½œã€Šæ‰¬å·æ…¢ã€‹ã€ã€Šæš—é¦™ã€‹ã€‚',
  'æ–‡å¤©ç¥¥': 'æ–‡å¤©ç¥¥ï¼ˆ1236-1283ï¼‰ï¼Œå—å®‹çˆ±å›½è¯—äººã€‚è¯—é£æ…·æ…¨æ‚²å£®ã€‚ä»£è¡¨ä½œã€Šè¿‡é›¶ä¸æ´‹ã€‹ã€ã€Šæ­£æ°”æ­Œã€‹ã€‚',
  'çº³å…°æ€§å¾·': 'çº³å…°æ€§å¾·ï¼ˆ1655-1685ï¼‰ï¼Œæ¸…ä»£è¯äººï¼Œè¯é£å©‰çº¦å‡„æ¸…ã€‚ä»£è¡¨ä½œã€Šæœ¨å…°èŠ±ã€‹ã€ã€Šé•¿ç›¸æ€ã€‹ã€‚',

  // æ‰©å±•è¯—è¯ä½œå“
  'é™å¤œæ€': 'æç™½ã€Šé™å¤œæ€ã€‹ï¼šåºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚ç®€æ´æ˜å¿«ï¼Œæ€ä¹¡æƒ…æ·±ã€‚',
  'å°†è¿›é…’': 'æç™½ã€Šå°†è¿›é…’ã€‹ï¼šå›ä¸è§é»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚è±ªæ”¾æ´’è„±ï¼Œæ°”åŠ¿ç£…ç¤´ã€‚',
  'æ˜¥æœ›': 'æœç”«ã€Šæ˜¥æœ›ã€‹ï¼šå›½ç ´å±±æ²³åœ¨ï¼ŒåŸæ˜¥è‰æœ¨æ·±ã€‚æ„Ÿæ—¶èŠ±æº…æ³ªï¼Œæ¨åˆ«é¸ŸæƒŠå¿ƒã€‚å¿§å›½å¿§æ°‘ï¼Œæ²‰éƒé¡¿æŒ«ã€‚',
  'ç™»é«˜': 'æœç”«ã€Šç™»é«˜ã€‹ï¼šé£æ€¥å¤©é«˜çŒ¿å•¸å“€ï¼Œæ¸šæ¸…æ²™ç™½é¸Ÿé£å›ã€‚æ— è¾¹è½æœ¨è§è§ä¸‹ï¼Œä¸å°½é•¿æ±Ÿæ»šæ»šæ¥ã€‚ä¸ƒå¾‹å…¸èŒƒã€‚',
  'å±±å±…ç§‹æš': 'ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹ï¼šç©ºå±±æ–°é›¨åï¼Œå¤©æ°”æ™šæ¥ç§‹ã€‚æ˜æœˆæ¾é—´ç…§ï¼Œæ¸…æ³‰çŸ³ä¸Šæµã€‚å±±æ°´ç”°å›­ï¼Œæ„å¢ƒå¹½è¿œã€‚',
  'ç›¸æ€': 'ç‹ç»´ã€Šç›¸æ€ã€‹ï¼šçº¢è±†ç”Ÿå—å›½ï¼Œæ˜¥æ¥å‘å‡ æã€‚æ„¿å›å¤šé‡‡æ’·ï¼Œæ­¤ç‰©æœ€ç›¸æ€ã€‚è¯­è¨€ç®€ç»ƒï¼Œæƒ…æ„ŸçœŸæŒšã€‚',
  'çµç¶è¡Œ': 'ç™½å±…æ˜“ã€Šçµç¶è¡Œã€‹ï¼šæµ”é˜³æ±Ÿå¤´å¤œé€å®¢ï¼Œæ«å¶è»èŠ±ç§‹ç‘Ÿç‘Ÿã€‚å™äº‹ç”ŸåŠ¨ï¼Œæƒ…æ„Ÿæ·±æ²‰ã€‚',
  'é•¿æ¨æ­Œ': 'ç™½å±…æ˜“ã€Šé•¿æ¨æ­Œã€‹ï¼šæ±‰çš‡é‡è‰²æ€å€¾å›½ï¼Œå¾¡å®‡å¤šå¹´æ±‚ä¸å¾—ã€‚å™äº‹é•¿è¯—ï¼Œçˆ±æƒ…æ‚²å‰§ã€‚',
  'æ°´è°ƒæ­Œå¤´': 'è‹è½¼ã€Šæ°´è°ƒæ­Œå¤´Â·æ˜æœˆå‡ æ—¶æœ‰ã€‹ï¼šæ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚è±ªæ”¾æ´’è„±ï¼Œæ„å¢ƒå¼€é˜”ã€‚',
  'å¿µå¥´å¨‡': 'è‹è½¼ã€Šå¿µå¥´å¨‡Â·èµ¤å£æ€€å¤ã€‹ï¼šå¤§æ±Ÿä¸œå»ï¼Œæµªæ·˜å°½ï¼Œåƒå¤é£æµäººç‰©ã€‚æ€€å¤æŠ’æƒ…ï¼Œæ°”åŠ¿æ¢å®ã€‚',
  'å£°å£°æ…¢': 'ææ¸…ç…§ã€Šå£°å£°æ…¢Â·å¯»å¯»è§…è§…ã€‹ï¼šå¯»å¯»è§…è§…ï¼Œå†·å†·æ¸…æ¸…ï¼Œå‡„å‡„æƒ¨æƒ¨æˆšæˆšã€‚å©‰çº¦ç»†è…»ï¼Œæƒ…æ„Ÿæ·±æ²‰ã€‚',
  'å¦‚æ¢¦ä»¤': 'ææ¸…ç…§ã€Šå¦‚æ¢¦ä»¤ã€‹ï¼šå¸¸è®°æºªäº­æ—¥æš®ï¼Œæ²‰é†‰ä¸çŸ¥å½’è·¯ã€‚è¯­è¨€ä¼˜ç¾ï¼Œæ„å¢ƒæ¸…æ–°ã€‚',
  'é’ç‰æ¡ˆ': 'è¾›å¼ƒç–¾ã€Šé’ç‰æ¡ˆÂ·å…ƒå¤•ã€‹ï¼šä¸œé£å¤œæ”¾èŠ±åƒæ ‘ï¼Œæ›´å¹è½ã€æ˜Ÿå¦‚é›¨ã€‚è±ªæ”¾æ‚²å£®ï¼Œçˆ±å›½çƒ­æƒ…ã€‚',
  'ç ´é˜µå­': 'è¾›å¼ƒç–¾ã€Šç ´é˜µå­Â·ä¸ºé™ˆåŒç”«èµ‹å£®è¯ä»¥å¯„ä¹‹ã€‹ï¼šé†‰é‡ŒæŒ‘ç¯çœ‹å‰‘ï¼Œæ¢¦å›å¹è§’è¿è¥ã€‚æ…·æ…¨æ¿€æ˜‚ã€‚',
  'é’—å¤´å‡¤': 'é™†æ¸¸ã€Šé’—å¤´å‡¤ã€‹ï¼šçº¢é…¥æ‰‹ï¼Œé»„ç¸¢é…’ï¼Œæ»¡åŸæ˜¥è‰²å®«å¢™æŸ³ã€‚çˆ±æƒ…è¯ï¼Œæƒ…æ„ŸçœŸæŒšã€‚',
  'ç¤ºå„¿': 'é™†æ¸¸ã€Šç¤ºå„¿ã€‹ï¼šæ­»å»å…ƒçŸ¥ä¸‡äº‹ç©ºï¼Œä½†æ‚²ä¸è§ä¹å·åŒã€‚çˆ±å›½è¯—ï¼Œä¸´ç»ˆé—è¨€ã€‚',

  // æ‰©å±•è¯—è¯æŠ€å·§å’Œç†è®º
  'å¹³ä»„': 'å¹³ä»„æ˜¯è¯—è¯æ ¼å¾‹çš„åŸºæœ¬è¦ç´ ã€‚å¹³å£°æŒ‡é˜´å¹³ã€é˜³å¹³ï¼Œä»„å£°æŒ‡ä¸Šå£°ã€å»å£°ã€å…¥å£°ã€‚å¹³ä»„äº¤æ›¿å½¢æˆèŠ‚å¥ç¾ã€‚',
  'éŸµå¾‹': 'éŸµå¾‹æŒ‡è¯—è¯çš„éŸ³éŸµè§„å¾‹ï¼ŒåŒ…æ‹¬æŠ¼éŸµã€å¹³ä»„ã€èŠ‚å¥ç­‰ã€‚å¥½çš„éŸµå¾‹èƒ½å¢å¼ºè¯—è¯çš„éŸ³ä¹ç¾æ„Ÿã€‚',
  'å¯¹å¶': 'å¯¹å¶æ˜¯ä¿®è¾æ‰‹æ³•ï¼Œè¦æ±‚ä¸Šä¸‹å¥åœ¨å­—æ•°ã€ç»“æ„ã€æ„ä¹‰ä¸Šå¯¹ç§°ã€‚å¦‚"ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³ï¼Œä¸€è¡Œç™½é¹­ä¸Šé’å¤©"ã€‚',
  'æ’æ¯”': 'æ’æ¯”æ˜¯ç”¨ä¸‰ä¸ªæˆ–ä»¥ä¸Šç»“æ„ç›¸ä¼¼çš„çŸ­è¯­æˆ–å¥å­æ¥è¡¨è¾¾ç›¸å…³çš„å†…å®¹ã€‚èƒ½å¢å¼ºè¯­è¨€æ°”åŠ¿ã€‚',
  'å¤¸å¼ ': 'å¤¸å¼ æ˜¯ä¸ºäº†çªå‡ºäº‹ç‰©çš„ç‰¹å¾è€Œæ•…æ„è¨€è¿‡å…¶å®ã€‚å¦‚"é£æµç›´ä¸‹ä¸‰åƒå°ºï¼Œç–‘æ˜¯é“¶æ²³è½ä¹å¤©"ã€‚',
  'æ‹Ÿäºº': 'æ‹Ÿäººæ˜¯å°†äº‹ç‰©äººæ ¼åŒ–ï¼Œèµ‹äºˆäººçš„æƒ…æ„Ÿå’Œè¡Œä¸ºã€‚å¦‚"æ„Ÿæ—¶èŠ±æº…æ³ªï¼Œæ¨åˆ«é¸ŸæƒŠå¿ƒ"ã€‚',
  'è±¡å¾': 'è±¡å¾æ˜¯ç”¨å…·ä½“äº‹ç‰©ä»£è¡¨æŠ½è±¡æ¦‚å¿µã€‚å¦‚"æœˆäº®"è±¡å¾æ€ä¹¡ï¼Œ"æ¨æŸ³"è±¡å¾ç¦»åˆ«ã€‚',
  'å…¸æ•…': 'å…¸æ•…æ˜¯å¼•ç”¨å†å²æ•…äº‹æˆ–å‰äººè¯—æ–‡ã€‚èƒ½å¢åŠ ä½œå“çš„æ–‡åŒ–å†…æ¶µï¼Œå¦‚"å‘¨å…¬åå“ºï¼Œå¤©ä¸‹å½’å¿ƒ"ã€‚',
  'è¯—çœ¼': 'è¯—çœ¼æ˜¯è¯—è¯ä¸­æœ€ç²¾ç‚¼ä¼ ç¥çš„å­—è¯ã€‚å¦‚"æ˜¥é£åˆç»¿æ±Ÿå—å²¸"çš„"ç»¿"å­—å°±æ˜¯è¯—çœ¼ã€‚',
  'è¯çœ¼': 'è¯çœ¼æ˜¯è¯ä¸­æœ€å…³é”®çš„å­—è¯ï¼Œå¾€å¾€èƒ½ç‚¹æ˜ä¸»é¢˜æˆ–å‡åæ„å¢ƒã€‚',

  // æ‰©å±•è¯—è¯æµæ´¾å’Œé£æ ¼
  'åˆå”å››æ°': 'åˆå”å››æ°æŒ‡ç‹å‹ƒã€æ¨ç‚¯ã€å¢ç…§é‚»ã€éª†å®¾ç‹ã€‚ä»–ä»¬çš„è¯—æ­Œå¼€å§‹æ‘†è„±é½æ¢è¯—é£ï¼Œå…·æœ‰é©æ–°æ„ä¹‰ã€‚',
  'å¤§å†åæ‰å­': 'å¤§å†åæ‰å­æ˜¯å”ä»£å®—å¤§å†æ—¶æœŸçš„åä½è¯—äººï¼Œè¯—é£æ¸…ä¸½æ·¡è¿œï¼Œä»£è¡¨ä¸­å”è¯—é£è½¬å˜ã€‚',
  'èŠ±é—´æ´¾': 'èŠ±é—´æ´¾æ˜¯æ™šå”äº”ä»£è¯æ´¾ï¼Œä»¥æ¸©åº­ç­ ã€éŸ¦åº„ä¸ºä»£è¡¨ï¼Œè¯é£å©‰çº¦è‰³ä¸½ï¼Œå¤šå†™é—ºæƒ…ç¦»æ„ã€‚',
  'æ±Ÿè¥¿è¯—æ´¾': 'æ±Ÿè¥¿è¯—æ´¾æ˜¯å®‹ä»£è¯—æ­Œæµæ´¾ï¼Œä»¥é»„åº­åšä¸ºä»£è¡¨ï¼Œè®²ç©¶"ç‚¹é“æˆé‡‘"ï¼Œé£æ ¼ç”Ÿæ–°ç˜¦ç¡¬ã€‚',
  'æ±Ÿæ¹–è¯—æ´¾': 'æ±Ÿæ¹–è¯—æ´¾æ˜¯å—å®‹è¯—æ­Œæµæ´¾ï¼Œå¤šä¸ºå¸ƒè¡£æ–‡äººï¼Œè¯—é£æ¸…æ–°è‡ªç„¶ï¼Œåæ˜ ç¤¾ä¼šç°å®ã€‚',
  'æ€§çµæ´¾': 'æ€§çµæ´¾æ˜¯æ¸…ä»£è¯—æ­Œæµæ´¾ï¼Œä¸»å¼ ç›´æŠ’èƒ¸è‡†ï¼Œåå¯¹æ‹Ÿå¤ã€‚ä»£è¡¨è¯—äººæœ‰è¢æšã€èµµç¿¼ç­‰ã€‚',
  'æ ¼è°ƒæ´¾': 'æ ¼è°ƒæ´¾æ˜¯æ¸…ä»£è¯—æ­Œæµæ´¾ï¼Œå¼ºè°ƒè¯—æ­Œçš„æ ¼å¾‹å’Œå£°è°ƒï¼Œä»£è¡¨è¯—äººæœ‰æ²ˆå¾·æ½œç­‰ã€‚',
  'ç¥éŸµæ´¾': 'ç¥éŸµæ´¾æ˜¯æ¸…ä»£è¯—æ­Œæµæ´¾ï¼Œè¿½æ±‚å«è“„è•´è—‰çš„æ„å¢ƒï¼Œä»£è¡¨è¯—äººæœ‰ç‹å£«ç¦›ç­‰ã€‚',

  // æ‰©å±•è¯—è¯é‰´èµæ–¹æ³•
  'çŸ¥äººè®ºä¸–': 'çŸ¥äººè®ºä¸–æ˜¯é‰´èµè¯—è¯çš„é‡è¦æ–¹æ³•ï¼Œé€šè¿‡äº†è§£è¯—äººçš„ç”Ÿå¹³å’Œæ—¶ä»£èƒŒæ™¯æ¥ç†è§£ä½œå“ã€‚',
  'ä»¥æ„é€†å¿—': 'ä»¥æ„é€†å¿—æ˜¯é€šè¿‡åˆ†æä½œå“çš„è¯­è¨€å’Œæ„è±¡æ¥æ¨æµ‹ä½œè€…çš„çœŸå®æ„å›¾å’Œæƒ…æ„Ÿã€‚',
  'æ–‡æœ¬ç»†è¯»': 'æ–‡æœ¬ç»†è¯»æ˜¯ä»”ç»†åˆ†æè¯—è¯çš„è¯­è¨€ã€ç»“æ„ã€æ„è±¡ç­‰è¦ç´ ï¼Œæ·±å…¥ç†è§£ä½œå“çš„è‰ºæœ¯ç‰¹è‰²ã€‚',
  'æ¯”è¾ƒç ”ç©¶': 'æ¯”è¾ƒç ”ç©¶æ˜¯é€šè¿‡å¯¹æ¯”ä¸åŒè¯—äººã€ä¸åŒæ—¶æœŸã€ä¸åŒæµæ´¾çš„ä½œå“æ¥å‘ç°å…±æ€§å’Œä¸ªæ€§ã€‚',
  'æ–‡åŒ–è§£è¯»': 'æ–‡åŒ–è§£è¯»æ˜¯ä»å†å²æ–‡åŒ–è§’åº¦åˆ†æè¯—è¯ï¼Œç†è§£ä½œå“çš„æ–‡åŒ–å†…æ¶µå’Œå†å²æ„ä¹‰ã€‚',
  'ç¾å­¦åˆ†æ': 'ç¾å­¦åˆ†ææ˜¯ä»å®¡ç¾è§’åº¦æ¬£èµè¯—è¯çš„å½¢å¼ç¾ã€æ„å¢ƒç¾ã€è¯­è¨€ç¾ç­‰è‰ºæœ¯ä»·å€¼ã€‚',

  // æ‰©å±•è¯—è¯åˆ›ä½œæŒ‡å¯¼
  'ç«‹æ„': 'ç«‹æ„æ˜¯è¯—è¯åˆ›ä½œçš„ç¬¬ä¸€æ­¥ï¼Œè¦ç¡®å®šä¸»é¢˜å’Œæƒ…æ„ŸåŸºè°ƒã€‚å¥½çš„ç«‹æ„æ˜¯è¯—è¯æˆåŠŸçš„å…³é”®ã€‚',
  'é€‰æ': 'é€‰æè¦å›´ç»•ä¸»é¢˜é€‰æ‹©æ°å½“çš„æ„è±¡å’Œç´ æï¼Œåšåˆ°æƒ…æ™¯äº¤èï¼Œè™šå®ç›¸ç”Ÿã€‚',
  'å¸ƒå±€': 'å¸ƒå±€è¦åˆç†å®‰æ’è¯—è¯çš„ç»“æ„ï¼Œåšåˆ°èµ·æ‰¿è½¬åˆï¼Œå±‚æ¬¡åˆ†æ˜ã€‚',
  'ç‚¼å­—': 'ç‚¼å­—è¦ç²¾å¿ƒé€‰æ‹©æœ€å‡†ç¡®ã€æœ€ç”ŸåŠ¨çš„è¯è¯­ï¼Œåšåˆ°"è¯­ä¸æƒŠäººæ­»ä¸ä¼‘"ã€‚',
  'ä¿®è¾': 'ä¿®è¾è¦æ°å½“è¿ç”¨æ¯”å–»ã€æ‹Ÿäººã€å¤¸å¼ ç­‰æ‰‹æ³•ï¼Œå¢å¼ºä½œå“çš„è‰ºæœ¯æ„ŸæŸ“åŠ›ã€‚',
  'åˆ›æ–°': 'åˆ›æ–°è¦åœ¨ç»§æ‰¿ä¼ ç»Ÿçš„åŸºç¡€ä¸Šæœ‰æ‰€çªç ´ï¼Œå½¢æˆç‹¬ç‰¹çš„è‰ºæœ¯é£æ ¼ã€‚'
};

// æ™ºèƒ½åŒ¹é…é—®é¢˜å¹¶ç”Ÿæˆå›ç­”
const generateSmartResponse = (question: string): string => {
  // ç²¾ç¡®åŒ¹é…
  if (POEM_KNOWLEDGE_BASE[question]) {
    return POEM_KNOWLEDGE_BASE[question];
  }

  // å…³é”®è¯åŒ¹é… - æ‰©å±•æ›´å¤šå…³é”®è¯
  const keywords: Record<string, string> = {
    // è¯—äººå…³é”®è¯
    'æç™½': POEM_KNOWLEDGE_BASE['æç™½'],
    'æœç”«': POEM_KNOWLEDGE_BASE['æœç”«'],
    'è‹è½¼': POEM_KNOWLEDGE_BASE['è‹è½¼'],
    'ææ¸…ç…§': POEM_KNOWLEDGE_BASE['ææ¸…ç…§'],
    'ç™½å±…æ˜“': POEM_KNOWLEDGE_BASE['ç™½å±…æ˜“'],
    'ç‹ç»´': POEM_KNOWLEDGE_BASE['ç‹ç»´'],
    'è¾›å¼ƒç–¾': POEM_KNOWLEDGE_BASE['è¾›å¼ƒç–¾'],
    'é™†æ¸¸': POEM_KNOWLEDGE_BASE['é™†æ¸¸'],
    'é™¶æ¸Šæ˜': POEM_KNOWLEDGE_BASE['é™¶æ¸Šæ˜'],
    'å­Ÿæµ©ç„¶': POEM_KNOWLEDGE_BASE['å­Ÿæµ©ç„¶'],
    'ç‹æ˜Œé¾„': POEM_KNOWLEDGE_BASE['ç‹æ˜Œé¾„'],
    'å²‘å‚': POEM_KNOWLEDGE_BASE['å²‘å‚'],
    'é«˜é€‚': POEM_KNOWLEDGE_BASE['é«˜é€‚'],
    'æŸ³æ°¸': POEM_KNOWLEDGE_BASE['æŸ³æ°¸'],
    'æ™æ®Š': POEM_KNOWLEDGE_BASE['æ™æ®Š'],
    'æ¬§é˜³ä¿®': POEM_KNOWLEDGE_BASE['æ¬§é˜³ä¿®'],
    'ç‹å®‰çŸ³': POEM_KNOWLEDGE_BASE['ç‹å®‰çŸ³'],
    'ç§¦è§‚': POEM_KNOWLEDGE_BASE['ç§¦è§‚'],
    'å‘¨é‚¦å½¦': POEM_KNOWLEDGE_BASE['å‘¨é‚¦å½¦'],
    'å§œå¤”': POEM_KNOWLEDGE_BASE['å§œå¤”'],
    'æ–‡å¤©ç¥¥': POEM_KNOWLEDGE_BASE['æ–‡å¤©ç¥¥'],
    'çº³å…°æ€§å¾·': POEM_KNOWLEDGE_BASE['çº³å…°æ€§å¾·'],

    // è¯—è¯ä½“è£
    'å”è¯—': POEM_KNOWLEDGE_BASE['å”è¯—'],
    'å®‹è¯': POEM_KNOWLEDGE_BASE['å®‹è¯'],
    'å…ƒæ›²': POEM_KNOWLEDGE_BASE['å…ƒæ›²'],
    'è¯—ç»': POEM_KNOWLEDGE_BASE['è¯—ç»'],
    'æ¥šè¾': POEM_KNOWLEDGE_BASE['æ¥šè¾'],
    'ä¹åºœ': POEM_KNOWLEDGE_BASE['æ±‰ä¹åºœ'],
    'å¤è¯—': POEM_KNOWLEDGE_BASE['å¤è¯—'],
    'è¿‘ä½“è¯—': POEM_KNOWLEDGE_BASE['è¿‘ä½“è¯—'],
    'è¯': POEM_KNOWLEDGE_BASE['è¯'],
    'æ›²': POEM_KNOWLEDGE_BASE['æ›²'],
    'èµ‹': POEM_KNOWLEDGE_BASE['èµ‹'],

    // è¯—è¯æŠ€å·§
    'æ ¼å¾‹': POEM_KNOWLEDGE_BASE['æ ¼å¾‹'],
    'æ„å¢ƒ': POEM_KNOWLEDGE_BASE['æ„å¢ƒ'],
    'æŠ¼éŸµ': POEM_KNOWLEDGE_BASE['æŠ¼éŸµ'],
    'å¯¹ä»—': POEM_KNOWLEDGE_BASE['å¯¹ä»—'],
    'æ¯”å…´': POEM_KNOWLEDGE_BASE['æ¯”å…´'],
    'å¹³ä»„': POEM_KNOWLEDGE_BASE['å¹³ä»„'],
    'éŸµå¾‹': POEM_KNOWLEDGE_BASE['éŸµå¾‹'],
    'å¯¹å¶': POEM_KNOWLEDGE_BASE['å¯¹å¶'],
    'æ’æ¯”': POEM_KNOWLEDGE_BASE['æ’æ¯”'],
    'å¤¸å¼ ': POEM_KNOWLEDGE_BASE['å¤¸å¼ '],
    'æ‹Ÿäºº': POEM_KNOWLEDGE_BASE['æ‹Ÿäºº'],
    'è±¡å¾': POEM_KNOWLEDGE_BASE['è±¡å¾'],
    'å…¸æ•…': POEM_KNOWLEDGE_BASE['å…¸æ•…'],
    'è¯—çœ¼': POEM_KNOWLEDGE_BASE['è¯—çœ¼'],
    'è¯çœ¼': POEM_KNOWLEDGE_BASE['è¯çœ¼'],

    // è¯—è¯æµæ´¾
    'å©‰çº¦': POEM_KNOWLEDGE_BASE['å©‰çº¦æ´¾'],
    'è±ªæ”¾': POEM_KNOWLEDGE_BASE['è±ªæ”¾æ´¾'],
    'å±±æ°´': POEM_KNOWLEDGE_BASE['å±±æ°´ç”°å›­è¯—æ´¾'],
    'è¾¹å¡': POEM_KNOWLEDGE_BASE['è¾¹å¡è¯—æ´¾'],
    'ç°å®ä¸»ä¹‰': POEM_KNOWLEDGE_BASE['ç°å®ä¸»ä¹‰'],
    'æµªæ¼«ä¸»ä¹‰': 'æµªæ¼«ä¸»ä¹‰å¼ºè°ƒä¸»è§‚æƒ…æ„Ÿå’Œæƒ³è±¡ï¼Œè¿½æ±‚ä¸ªæ€§è§£æ”¾å’Œç†æƒ³å¢ƒç•Œã€‚æç™½æ˜¯æµªæ¼«ä¸»ä¹‰çš„æ°å‡ºä»£è¡¨ã€‚',
    'å»ºå®‰': POEM_KNOWLEDGE_BASE['å»ºå®‰æ–‡å­¦'],
    'åˆå”å››æ°': POEM_KNOWLEDGE_BASE['åˆå”å››æ°'],
    'å¤§å†åæ‰å­': POEM_KNOWLEDGE_BASE['å¤§å†åæ‰å­'],
    'èŠ±é—´æ´¾': POEM_KNOWLEDGE_BASE['èŠ±é—´æ´¾'],
    'æ±Ÿè¥¿è¯—æ´¾': POEM_KNOWLEDGE_BASE['æ±Ÿè¥¿è¯—æ´¾'],
    'æ±Ÿæ¹–è¯—æ´¾': POEM_KNOWLEDGE_BASE['æ±Ÿæ¹–è¯—æ´¾'],
    'æ€§çµæ´¾': POEM_KNOWLEDGE_BASE['æ€§çµæ´¾'],
    'æ ¼è°ƒæ´¾': POEM_KNOWLEDGE_BASE['æ ¼è°ƒæ´¾'],
    'ç¥éŸµæ´¾': POEM_KNOWLEDGE_BASE['ç¥éŸµæ´¾'],

    // è¯—è¯ä½œå“
    'é™å¤œæ€': POEM_KNOWLEDGE_BASE['é™å¤œæ€'],
    'å°†è¿›é…’': POEM_KNOWLEDGE_BASE['å°†è¿›é…’'],
    'æ˜¥æœ›': POEM_KNOWLEDGE_BASE['æ˜¥æœ›'],
    'ç™»é«˜': POEM_KNOWLEDGE_BASE['ç™»é«˜'],
    'å±±å±…ç§‹æš': POEM_KNOWLEDGE_BASE['å±±å±…ç§‹æš'],
    'ç›¸æ€': POEM_KNOWLEDGE_BASE['ç›¸æ€'],
    'çµç¶è¡Œ': POEM_KNOWLEDGE_BASE['çµç¶è¡Œ'],
    'é•¿æ¨æ­Œ': POEM_KNOWLEDGE_BASE['é•¿æ¨æ­Œ'],
    'æ°´è°ƒæ­Œå¤´': POEM_KNOWLEDGE_BASE['æ°´è°ƒæ­Œå¤´'],
    'å¿µå¥´å¨‡': POEM_KNOWLEDGE_BASE['å¿µå¥´å¨‡'],
    'å£°å£°æ…¢': POEM_KNOWLEDGE_BASE['å£°å£°æ…¢'],
    'å¦‚æ¢¦ä»¤': POEM_KNOWLEDGE_BASE['å¦‚æ¢¦ä»¤'],
    'é’ç‰æ¡ˆ': POEM_KNOWLEDGE_BASE['é’ç‰æ¡ˆ'],
    'ç ´é˜µå­': POEM_KNOWLEDGE_BASE['ç ´é˜µå­'],
    'é’—å¤´å‡¤': POEM_KNOWLEDGE_BASE['é’—å¤´å‡¤'],
    'ç¤ºå„¿': POEM_KNOWLEDGE_BASE['ç¤ºå„¿'],

    // å­¦ä¹ æ–¹æ³•
    'æ¬£èµ': POEM_KNOWLEDGE_BASE['å¦‚ä½•æ¬£èµè¯—è¯'],
    'é‰´èµ': POEM_KNOWLEDGE_BASE['å¦‚ä½•æ¬£èµè¯—è¯'],
    'åˆ›ä½œ': POEM_KNOWLEDGE_BASE['è¯—è¯åˆ›ä½œæŠ€å·§'],
    'å†å²': POEM_KNOWLEDGE_BASE['è¯—è¯å†å²'],
    'ä»·å€¼': POEM_KNOWLEDGE_BASE['è¯—è¯çš„ç¤¾ä¼šä»·å€¼'],
    'çŸ¥äººè®ºä¸–': POEM_KNOWLEDGE_BASE['çŸ¥äººè®ºä¸–'],
    'ä»¥æ„é€†å¿—': POEM_KNOWLEDGE_BASE['ä»¥æ„é€†å¿—'],
    'æ–‡æœ¬ç»†è¯»': POEM_KNOWLEDGE_BASE['æ–‡æœ¬ç»†è¯»'],
    'æ¯”è¾ƒç ”ç©¶': POEM_KNOWLEDGE_BASE['æ¯”è¾ƒç ”ç©¶'],
    'æ–‡åŒ–è§£è¯»': POEM_KNOWLEDGE_BASE['æ–‡åŒ–è§£è¯»'],
    'ç¾å­¦åˆ†æ': POEM_KNOWLEDGE_BASE['ç¾å­¦åˆ†æ'],
    'ç«‹æ„': POEM_KNOWLEDGE_BASE['ç«‹æ„'],
    'é€‰æ': POEM_KNOWLEDGE_BASE['é€‰æ'],
    'å¸ƒå±€': POEM_KNOWLEDGE_BASE['å¸ƒå±€'],
    'ç‚¼å­—': POEM_KNOWLEDGE_BASE['ç‚¼å­—'],
    'ä¿®è¾': POEM_KNOWLEDGE_BASE['ä¿®è¾'],
    'åˆ›æ–°': POEM_KNOWLEDGE_BASE['åˆ›æ–°']
  };

  // æŸ¥æ‰¾å…³é”®è¯
  for (const [keyword, answer] of Object.entries(keywords)) {
    if (question.includes(keyword)) {
      return answer;
    }
  }

  // æ™ºèƒ½æ„å›¾è¯†åˆ«å’Œå›ç­”
  if (question.includes('æ¨è') || question.includes('ä»‹ç»') || question.includes('ä»€ä¹ˆ')) {
    return handleRecommendationQuestion(question);
  } else if (question.includes('è§£é‡Š') || question.includes('å«ä¹‰') || question.includes('æ„æ€')) {
    return handleExplanationQuestion(question);
  } else if (question.includes('åŒºåˆ«') || question.includes('ä¸åŒ') || question.includes('å¯¹æ¯”')) {
    return handleComparisonQuestion(question);
  } else if (question.includes('å¦‚ä½•') || question.includes('æ€æ ·') || question.includes('æ–¹æ³•')) {
    return handleMethodQuestion(question);
  }

  // é»˜è®¤å›ç­” - æ›´è¯¦ç»†çš„æŒ‡å¯¼
  return `å…³äº"${question}"ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ·±åº¦çš„è¯—è¯é—®é¢˜ï¼ä¸­å›½è¯—è¯æ–‡åŒ–æºè¿œæµé•¿ï¼Œæ¶‰åŠåˆ°ä¸°å¯Œçš„æ–‡å­¦çŸ¥è¯†å’Œå†å²èƒŒæ™¯ã€‚

æ ¹æ®æ‚¨çš„é—®é¢˜ï¼Œæˆ‘å»ºè®®æ‚¨ï¼š

ğŸ“š **æŸ¥é˜…ç»å…¸æ–‡çŒ®**
- ã€Šå”è¯—ä¸‰ç™¾é¦–ã€‹ã€ã€Šå®‹è¯ä¸‰ç™¾é¦–ã€‹ç­‰ç»å…¸é€‰é›†
- ç›¸å…³è¯—äººçš„ä¼ è®°å’Œç ”ç©¶è‘—ä½œ
- è¯—è¯é‰´èµè¾å…¸å’Œæ–‡å­¦å²

ğŸ¯ **æ·±å…¥ç†è§£æ–¹å‘**
1. äº†è§£è¯—äººçš„ç”Ÿå¹³å’Œåˆ›ä½œèƒŒæ™¯
2. åˆ†æè¯—è¯çš„è‰ºæœ¯æ‰‹æ³•å’Œè¯­è¨€ç‰¹è‰²  
3. ä½“ä¼šä½œå“çš„æƒ…æ„Ÿå†…æ¶µå’Œæ€æƒ³å¢ƒç•Œ
4. æ¢ç©¶è¯—è¯çš„å†å²æ„ä¹‰å’Œæ–‡åŒ–ä»·å€¼

ğŸ’¡ **å…·ä½“å»ºè®®**
å¦‚æœæ‚¨èƒ½æä¾›æ›´å…·ä½“çš„å…³é”®è¯æˆ–è¯—äººåå­—ï¼Œæˆ‘å¯ä»¥ç»™å‡ºæ›´ç²¾å‡†çš„å›ç­”ã€‚æ¯”å¦‚ï¼š
- "æç™½çš„è¯—æ­Œç‰¹ç‚¹"
- "å”è¯—çš„æ ¼å¾‹è¦æ±‚" 
- "å®‹è¯å©‰çº¦æ´¾çš„ä»£è¡¨ä½œå“"

æœŸå¾…ä¸æ‚¨ç»§ç»­æ¢è®¨è¯—è¯çš„å¥¥ç§˜ï¼`;
};

// å¤„ç†æ¨èç±»é—®é¢˜
const handleRecommendationQuestion = (question: string): string => {
  if (question.includes('å”è¯—') || question.includes('å”ä»£')) {
    return 'æˆ‘æ¨èä»¥ä¸‹å‡ é¦–ç»å…¸å”è¯—ï¼š\n\n1. æç™½ã€Šé™å¤œæ€ã€‹ - ç®€æ´æ˜å¿«ï¼Œæ€ä¹¡æƒ…æ·±\n2. æœç”«ã€Šæ˜¥æœ›ã€‹ - å¿§å›½å¿§æ°‘ï¼Œæ²‰éƒé¡¿æŒ«\n3. ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹ - å±±æ°´ç”°å›­ï¼Œæ„å¢ƒå¹½è¿œ\n4. ç™½å±…æ˜“ã€Šçµç¶è¡Œã€‹ - å™äº‹ç”ŸåŠ¨ï¼Œæƒ…æ„ŸçœŸæŒš\n\næ‚¨å¯¹å“ªé¦–æ›´æ„Ÿå…´è¶£ï¼Ÿæˆ‘å¯ä»¥è¯¦ç»†è§£è¯»ã€‚';
  } else if (question.includes('å®‹è¯') || question.includes('å®‹ä»£')) {
    return 'æˆ‘æ¨èä»¥ä¸‹å‡ é¦–ç»å…¸å®‹è¯ï¼š\n\n1. è‹è½¼ã€Šæ°´è°ƒæ­Œå¤´ã€‹ - è±ªæ”¾æ´’è„±ï¼Œæ„å¢ƒå¼€é˜”\n2. ææ¸…ç…§ã€Šå£°å£°æ…¢ã€‹ - å©‰çº¦ç»†è…»ï¼Œæƒ…æ„Ÿæ·±æ²‰\n3. è¾›å¼ƒç–¾ã€Šé’ç‰æ¡ˆã€‹ - æ…·æ…¨æ‚²å£®ï¼Œçˆ±å›½çƒ­æƒ…\n4. æŸ³æ°¸ã€Šé›¨éœ–é“ƒã€‹ - ç¦»æ„åˆ«ç»ªï¼Œç¼ ç»µæ‚±æ»';
  } else if (question.includes('è¯—äºº') || question.includes('è¯äºº')) {
    return 'æ ¹æ®æ‚¨çš„å…´è¶£ï¼Œæˆ‘æ¨èï¼š\n\nğŸ”ï¸ **è±ªæ”¾æ´¾**ï¼šæç™½ã€è‹è½¼ã€è¾›å¼ƒç–¾\nğŸŒ¸ **å©‰çº¦æ´¾**ï¼šææ¸…ç…§ã€æŸ³æ°¸ã€æ™å‡ é“\nğŸŒ¾ **ç°å®ä¸»ä¹‰**ï¼šæœç”«ã€ç™½å±…æ˜“ã€é™†æ¸¸\nğŸŒ¿ **å±±æ°´ç”°å›­**ï¼šç‹ç»´ã€å­Ÿæµ©ç„¶ã€é™¶æ¸Šæ˜\n\næ‚¨æƒ³äº†è§£å“ªä½è¯—äººçš„å…·ä½“ä½œå“ï¼Ÿ';
  }
  return POEM_KNOWLEDGE_BASE['å¦‚ä½•æ¬£èµè¯—è¯'];
};

// å¤„ç†è§£é‡Šç±»é—®é¢˜
const handleExplanationQuestion = (question: string): string => {
  // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤æ‚çš„è§£é‡Šé€»è¾‘
  return `å…³äºæ‚¨æåˆ°çš„è¯—è¯å†…å®¹ï¼Œè¿™æ¶‰åŠåˆ°è¯—è¯çš„æ·±å±‚è§£è¯»ã€‚å»ºè®®æ‚¨ï¼š\n\n1. æä¾›å…·ä½“çš„è¯—å¥æˆ–å…³é”®è¯\n2. è¯´æ˜æ‚¨æƒ³äº†è§£çš„å…·ä½“æ–¹é¢ï¼ˆå¦‚èƒŒæ™¯ã€æ‰‹æ³•ã€æƒ…æ„Ÿç­‰ï¼‰\n3. æˆ‘ä¼šç»“åˆç›¸å…³çŸ¥è¯†ä¸ºæ‚¨è¯¦ç»†è§£ç­”ã€‚\n\næ¯”å¦‚ï¼š"è¯·è§£é‡Š'åºŠå‰æ˜æœˆå…‰'çš„åˆ›ä½œèƒŒæ™¯å’Œè‰ºæœ¯ç‰¹è‰²"`;
};

// å¤„ç†æ¯”è¾ƒç±»é—®é¢˜
const handleComparisonQuestion = (question: string): string => {
  if (question.includes('å”è¯—') && question.includes('å®‹è¯')) {
    return POEM_KNOWLEDGE_BASE['å”è¯—å’Œå®‹è¯çš„åŒºåˆ«'];
  } else if (question.includes('å©‰çº¦') && question.includes('è±ªæ”¾')) {
    return 'å©‰çº¦æ´¾å’Œè±ªæ”¾æ´¾æ˜¯å®‹è¯çš„ä¸¤å¤§æµæ´¾ï¼š\n\nğŸŒ¸ **å©‰çº¦æ´¾**ï¼šæƒ…æ„Ÿç»†è…»ï¼Œè¯­è¨€ä¼˜ç¾ï¼Œå¤šå†™ä¸ªäººæƒ…æ„Ÿ\nğŸ”ï¸ **è±ªæ”¾æ´¾**ï¼šæ°”åŠ¿ç£…ç¤´ï¼Œé¢˜æå¹¿æ³›ï¼Œå……æ»¡æµªæ¼«è‰²å½©\n\nä¸¤è€…å„æœ‰ç‰¹è‰²ï¼Œå…±åŒæ„æˆäº†å®‹è¯çš„ä¸°å¯Œé¢è²Œã€‚';
  }
  return 'æ¯”è¾ƒåˆ†ææ˜¯ç†è§£è¯—è¯çš„é‡è¦æ–¹æ³•ã€‚è¯·æä¾›å…·ä½“çš„æ¯”è¾ƒå¯¹è±¡ï¼Œæˆ‘ä¼šä¸ºæ‚¨è¯¦ç»†åˆ†æå®ƒä»¬çš„å¼‚åŒç‚¹ã€‚';
};

// å¤„ç†æ–¹æ³•ç±»é—®é¢˜
const handleMethodQuestion = (question: string): string => {
  if (question.includes('æ¬£èµ') || question.includes('é‰´èµ')) {
    return POEM_KNOWLEDGE_BASE['å¦‚ä½•æ¬£èµè¯—è¯'];
  } else if (question.includes('åˆ›ä½œ') || question.includes('å†™ä½œ')) {
    return POEM_KNOWLEDGE_BASE['è¯—è¯åˆ›ä½œæŠ€å·§'];
  }
  return 'å…³äºè¯—è¯çš„å­¦ä¹ æ–¹æ³•ï¼Œæˆ‘å»ºè®®ä»åŸºç¡€å…¥æ‰‹ï¼Œå¾ªåºæ¸è¿›ï¼š\n\n1. å¤šè¯»ç»å…¸ä½œå“ï¼ŒåŸ¹å…»è¯­æ„Ÿ\n2. å­¦ä¹ è¯—è¯æ ¼å¾‹å’Œåˆ›ä½œæŠ€å·§\n3. äº†è§£å†å²æ–‡åŒ–èƒŒæ™¯\n4. å‹¤äºç»ƒä¹ å’Œæ€è€ƒ';
};

// çœŸå®çš„n8n APIè°ƒç”¨
export const callN8NAssistant = async (request: AIAssistantRequest): Promise<AIAssistantResponse> => {
  // æ£€æŸ¥n8né…ç½®æ˜¯å¦å¯ç”¨ï¼ˆåªæœ‰å½“é…ç½®äº†çœŸå®URLæ—¶æ‰è°ƒç”¨n8nï¼‰
  const isN8NConfigured = N8N_CONFIG.baseUrl &&
    N8N_CONFIG.baseUrl !== 'http://localhost:5678' &&
    N8N_CONFIG.apiKey !== 'demo-key';

  if (!isN8NConfigured) {
    // ä½¿ç”¨æœ¬åœ°çŸ¥è¯†åº“ä½œä¸ºé™çº§æ–¹æ¡ˆ
    console.log('n8næœåŠ¡æœªé…ç½®ï¼Œä½¿ç”¨æœ¬åœ°çŸ¥è¯†åº“');
    return callLocalAssistant(request);
  }

  try {
    console.log('è°ƒç”¨n8n API:', `${N8N_CONFIG.baseUrl}${N8N_CONFIG.webhookPath}`);

    const response = await fetch(`${N8N_CONFIG.baseUrl}${N8N_CONFIG.webhookPath}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${N8N_CONFIG.apiKey}`
      },
      body: JSON.stringify(request)
    });

    if (!response.ok) {
      throw new Error(`n8n APIé”™è¯¯: ${response.status} ${response.statusText}`);
    }

    const data = await response.json();
    console.log('n8n APIå“åº”:', data);

    return {
      answer: data.data?.answer || data.answer || 'æ”¶åˆ°å›å¤ä½†å†…å®¹ä¸ºç©º',
      sources: data.data?.sources || data.sources || ['n8nå·¥ä½œæµ'],
      confidence: data.data?.confidence || data.confidence || 0.8,
      timestamp: data.data?.timestamp || data.timestamp || new Date().toISOString()
    };
  } catch (error) {
    console.error('n8n APIè°ƒç”¨å¤±è´¥:', error);

    // é™çº§åˆ°æœ¬åœ°çŸ¥è¯†åº“
    console.log('n8nè°ƒç”¨å¤±è´¥ï¼Œåˆ‡æ¢åˆ°æœ¬åœ°çŸ¥è¯†åº“');
    return callLocalAssistant(request);
  }
};

// æœ¬åœ°çŸ¥è¯†åº“è°ƒç”¨ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
const callLocalAssistant = async (request: AIAssistantRequest): Promise<AIAssistantResponse> => {
  // æ¨¡æ‹ŸAPIè°ƒç”¨å»¶è¿Ÿ
  await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 400));

  try {
    const answer = generateSmartResponse(request.question);

    return {
      answer,
      sources: ['æœ¬åœ°è¯—è¯çŸ¥è¯†åº“', 'æ–‡å­¦å…¸ç±', 'å†å²æ–‡çŒ®'],
      confidence: 0.75,
      timestamp: new Date().toISOString()
    };
  } catch (error) {
    console.error('æœ¬åœ°çŸ¥è¯†åº“å¤„ç†å¤±è´¥:', error);

    return {
      answer: `æŠ±æ­‰ï¼Œæš‚æ—¶æ— æ³•å¤„ç†æ‚¨çš„è¯·æ±‚ã€‚${request.question} æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¯—è¯é—®é¢˜ï¼Œå»ºè®®æ‚¨ï¼š\n\n1. æŸ¥é˜…ã€Šå”è¯—ä¸‰ç™¾é¦–ã€‹ã€ã€Šå®‹è¯ä¸‰ç™¾é¦–ã€‹ç­‰ç»å…¸é€‰é›†\n2. äº†è§£ç›¸å…³è¯—äººçš„ç”Ÿå¹³å’Œåˆ›ä½œèƒŒæ™¯\n3. å…³æ³¨è¯—è¯çš„æ ¼å¾‹å’Œè‰ºæœ¯ç‰¹è‰²\n\næˆ–è€…ç¨åå†è¯•ã€‚`,
      confidence: 0.3,
      timestamp: new Date().toISOString()
    };
  }
};

// è·å–å¿«é€Ÿé—®é¢˜å»ºè®®
export const getQuickQuestions = (): string[] => {
  return [
    'æ¨èä¸€é¦–ç»å…¸å”è¯—',
    'è§£é‡Š"åºŠå‰æ˜æœˆå…‰"çš„å«ä¹‰',
    'ä»‹ç»æç™½çš„ä¸»è¦ä½œå“',
    'ä»€ä¹ˆæ˜¯ä¸ƒè¨€ç»å¥ï¼Ÿ',
    'å”è¯—å’Œå®‹è¯çš„åŒºåˆ«',
    'æ¨èå®‹ä»£è¯äºº',
    'è§£é‡Š"å¤§æ±Ÿä¸œå»"',
    'ä»€ä¹ˆæ˜¯è¯ç‰Œå',
    'å¦‚ä½•æ¬£èµè¯—è¯',
    'è¯—è¯åˆ›ä½œæŠ€å·§',
    'å©‰çº¦æ´¾çš„ç‰¹ç‚¹',
    'è±ªæ”¾æ´¾çš„ä»£è¡¨ä½œå“',
    'ç‹ç»´çš„å±±æ°´è¯—ç‰¹ç‚¹',
    'ææ¸…ç…§çš„å©‰çº¦é£æ ¼',
    'è‹è½¼çš„è±ªæ”¾è¯é£',
    'æœç”«çš„ç°å®ä¸»ä¹‰',
    'é™¶æ¸Šæ˜çš„ç”°å›­è¯—',
    'è¾›å¼ƒç–¾çš„çˆ±å›½è¯',
    'è¯—è¯æ ¼å¾‹åŸºç¡€çŸ¥è¯†',
    'å¦‚ä½•åˆ›ä½œä¸€é¦–è¯—',
    'è¯—è¯é‰´èµæ–¹æ³•',
    'å¤ä»£è¯—äººæ’å',
    'ç»å…¸è¯—è¯åå¥',
    'è¯—è¯ä¸­çš„æ„è±¡è¿ç”¨',
    'ä¸åŒæœä»£çš„è¯—é£'
  ];
};

// éªŒè¯n8nè¿æ¥çŠ¶æ€
export const checkN8NConnection = async (): Promise<boolean> => {
  try {
    // åœ¨å®é™…åº”ç”¨ä¸­æ£€æŸ¥n8næœåŠ¡çŠ¶æ€
    // const response = await fetch(`${N8N_CONFIG.baseUrl}/health`);
    // return response.ok;

    // æ¨¡æ‹Ÿè¿æ¥æ£€æŸ¥
    return true;
  } catch (error) {
    console.error('n8nè¿æ¥æ£€æŸ¥å¤±è´¥:', error);
    return false;
  }
};

export default {
  callN8NAssistant,
  getQuickQuestions,
  checkN8NConnection
};